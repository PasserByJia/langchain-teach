# Demo 9: 绑定（Binding）

这个示例演示了如何使用 LangChain 的 `withConfig` 方法将运行时参数（例如工具）绑定到模型。

## 功能

### 1. 绑定工具 (`bindingToolDemo`)

- **定义工具**: 定义一个名为 `get_current_weather` 的工具，模型可以使用它来获取天气信息。
- **绑定工具**: 使用 `model.withConfig({ tools })` 将定义的工具绑定到聊天模型。这使得模型在需要时可以调用这些工具。
- **模拟工具执行**:
    - 当模型返回一个工具调用请求时，一个名为 `toolExecutor` 的函数会模拟执行该工具。
    - `toolExecutor` 会根据请求的地点返回一个预设的温度。
- **两阶段调用**:
    - **第一次调用**: 向模型发送一个包含用户问题的 `HumanMessage`。模型会返回一个包含工具调用请求的 `AIMessage`。
    - **第二次调用**: 将工具调用的结果封装在一个 `ToolMessage` 中，然后连同原始消息一起再次发送给模型。模型会根据工具返回的信息生成一个自然的语言响应。
- **输出结果**: 最终，脚本会打印出模型生成的、包含天气信息的最终答案。

### 2. 绑定停止序列 (`bindingStopSequenceDemo`)

- **什么是停止序列？**
  - “停止序列”是一个或多个预定义的词或短语。当模型在生成文本时遇到这些序列，它会立即停止输出。这是一种精确控制模型输出长度和格式的有效方法。
- **为什么使用它？**
  - 在某些场景下，我们希望模型的输出严格遵循特定格式，或者在某个关键点之后就不要再生成任何内容。例如，在进行数学题解答时，我们可能只想要答案本身，而不需要模型在给出答案后继续进行对话或解释。 
- **示例中的应用**:
  - 在 `bindingStopSequenceDemo` 中，我们将 `stop: ["答案："]` 绑定到了模型。
  - 当我们用提示 `"x^3 + 7 = 12, 解是什么？ 答案："` 调用模型时，模型会从 `答案：` 之后开始生成。但由于 `答案：` 本身被设置为了停止序列，模型在技术上不会输出任何额外内容（或者只会输出它在停止前已经生成的极少量内容），从而确保了输出的简洁性。这在需要精确控制输出格式的场景中非常有用。

## 如何运行

```bash
npx tsx src/demo_9_Binding/index.ts
```

这个命令会执行脚本，你会看到模型首先决定调用工具，然后根据工具返回的信息，生成关于旧金山、纽约和洛杉矶天气的回复。