# Demo 12: 使用 `RunnablePassthrough.assign`

这个 `demo` 展示了如何使用 `RunnablePassthrough.assign` 在 LangChain 表达式语言（LCEL）中为链的状态添加新的键值对，同时保持原始输入不变。

## 功能

`RunnablePassthrough.assign` 允许你在一个链的步骤中，基于当前输入计算新的值，并将这些新值作为新的字段添加到结果中，而不会覆盖或修改原始输入中的任何字段。这在需要逐步构建一个复杂的输入对象（例如，一个字典或 JSON 对象）以供后续步骤使用时非常有用。

示例：
 **基本用法**: 演示了如何使用 `RunnablePassthrough.assign` 来添加多个派生自原始输入的字段。


## 如何运行

1.  确保你已经安装了所有必要的依赖项：

    ```bash
    npm install
    ```

2.  执行 `index.ts` 文件：

    ```bash
    npx ts-node src/demo_12_Assign/index.ts
    ```

## 适用场景

- **逐步构建输入**: 当你需要在一个链中逐步构建一个复杂的输入对象时，`RunnablePassthrough.assign` 是一个理想的选择。例如，你可以先获取用户问题，然后通过一次 `assign` 调用添加检索到的文档，再通过另一次 `assign` 调用添加聊天记录，最后将这个完整的对象传递给语言模型。
- **保留中间结果**: 在复杂的链中，你可能希望保留一些中间步骤的结果以供调试或后续处理。`assign` 可以让你轻松地将这些中间结果附加到主数据流中，而不会干扰链的主要逻辑。
- **增强 RAG 链**: 在 RAG 场景中，`assign` 可以让你在返回最终答案的同时，也返回检索到的源文档或上下文。这对于需要溯源或验证答案来源的应用非常有用，并且通过流式传输，可以更快地将部分结果呈现给用户。